/**
 * 全局公共组件样式
 * 包含可复用的 CSS 类和组件样式
 *
 * 注意：variables 通过 Vite additionalData 自动注入，无需 @import
 * 本文件通过 common.scss -> App.vue 全局加载
 * 页面 scoped 样式中不应重新定义这些类
 */

// ========================================
// 毛玻璃卡片
// ========================================

.glass-card {
  background: $glass-bg;
  border: 2rpx solid $glass-border;
  border-radius: $radius-lg;
  box-shadow: $shadow-md;
  backdrop-filter: blur(32rpx);

  // 尺寸变体
  &--sm {
    border-radius: $radius-md;
  }

  &--lg {
    border-radius: $radius-xl;
  }

  &--xl {
    border-radius: 48rpx;
  }

  // 可点击变体
  &--clickable {
    transition: all 0.3s;

    &:active {
      transform: scale(0.98);
      box-shadow: 0 2rpx 8rpx rgb(31 38 135 / 8%);
    }
  }

  // 实底变体（报修等非主题色页面）
  &--solid {
    background: rgb(255 255 255 / 90%);
    box-shadow: 0 4rpx 12rpx rgb(255 105 135 / 10%);
    backdrop-filter: blur(10rpx);
  }
}

// ========================================
// 背景装饰容器
// ========================================

.bg-decorations {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;

  .blob {
    position: absolute;
    border-radius: 50%;
    filter: blur(100rpx);
    animation: blob-float 20s ease-in-out infinite;

    // 默认颜色变体 - 暖色系
    &-1 {
      top: -200rpx;
      right: -100rpx;
      width: 600rpx;
      height: 600rpx;
      background: rgb(255 220 220 / 75%);
      animation-delay: 0s;
    }

    &-2 {
      bottom: -150rpx;
      left: -100rpx;
      width: 500rpx;
      height: 500rpx;
      background: rgb(255 220 180 / 45%);
      animation-delay: 5s;
    }

    &-3 {
      top: 50%;
      left: 50%;
      width: 400rpx;
      height: 400rpx;
      background: rgb(255 200 180 / 30%);
      transform: translate(-50%, -50%);
      animation-delay: 10s;
    }

    // 主色调变体
    &--primary {
      background: rgb(10 219 195 / 30%);
    }

    &--accent {
      background: rgb(255 159 67 / 30%);
    }

    &--blue {
      background: rgb(59 130 246 / 20%);
    }

    &--purple {
      background: rgb(99 102 241 / 15%);
    }
  }
}

// 绝对定位的装饰球（用于 ambient-blob 模式）
.ambient-blob {
  position: absolute;
  z-index: 0;
  border-radius: 50%;
  opacity: 0.6;
  filter: blur(120rpx);
  pointer-events: none;

  &.blob-primary {
    top: -100rpx;
    right: -100rpx;
    width: 500rpx;
    height: 500rpx;
    background-color: rgb(10 219 195 / 30%);
  }

  &.blob-accent {
    top: 400rpx;
    left: -200rpx;
    width: 560rpx;
    height: 560rpx;
    background-color: rgb(255 140 66 / 25%);
  }

  &.blob-blue {
    right: -100rpx;
    bottom: 200rpx;
    width: 500rpx;
    height: 500rpx;
    background-color: rgb(59 130 246 / 25%);
  }
}

// ========================================
// 页面背景
// ========================================

.page-bg {
  position: relative;
  overflow: hidden;
  min-height: 100vh;
  background-color: $bg-light;

  &--gradient {
    background: linear-gradient(135deg, $bg-gradient-start 0%, $bg-gradient-end 100%);
    background-attachment: fixed;
  }

  &--warm {
    background: linear-gradient(135deg, #fff5f7 0%, #ffe8ec 100%);
  }
}

// ========================================
// 页面容器布局
// ========================================

.page-container {
  position: relative;
  z-index: 1;
  display: flex;
  margin: 0 auto;
  max-width: 750rpx;
  min-height: 100vh;
  flex-direction: column;
}

// ========================================
// 页面头部样式
// ========================================

.page-header {
  position: sticky;
  top: 0;
  z-index: 50;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: calc(var(--status-bar-height, 0) + 45rpx) $spacing-lg 25rpx;

  &--blur {
    backdrop-filter: blur(20rpx);
  }

  &--center {
    justify-content: center;
  }

  // 标题组
  &__title-group {
    display: flex;
    flex-direction: column;
    gap: 4rpx;
  }

  &__title {
    font-size: 40rpx;
    color: $text-main;
    font-weight: $font-bold;
    letter-spacing: 0.5rpx;
  }

  &__subtitle {
    font-size: 22rpx;
    color: $text-sub;
    font-weight: $font-medium;
    letter-spacing: 1rpx;
    text-transform: uppercase;
  }

  // 返回按钮
  &__back {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 80rpx;
    height: 80rpx;
    border-radius: 50%;
    flex-shrink: 0;

    &:active {
      background: rgb(0 0 0 / 5%);
    }
  }

  &__placeholder {
    width: 80rpx;
    flex-shrink: 0;
  }
}

// ========================================
// 加载状态
// ========================================

.loading-state {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 120rpx 0;
  flex-direction: column;

  // 全屏居中变体
  &--fullpage {
    padding: 0;
    min-height: 60vh;
  }

  &__spinner {
    width: 60rpx;
    height: 60rpx;
    border: 4rpx solid rgb(243 243 243);
    border-top-color: $primary;
    border-radius: 50%;
    animation: loading-spin 1s linear infinite;
  }

  &__text {
    margin-top: $spacing-md;
    font-size: $font-md;
    color: $text-sub;
  }
}

// 兼容旧类名（页面中使用 .loading-container）
.loading-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60vh;
  flex-direction: column;
  gap: $spacing-md;

  .loading-text {
    font-size: $font-sm;
    color: $text-sub;
  }
}

// ========================================
// 空状态
// ========================================

.empty-state {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 120rpx 0;
  flex-direction: column;

  // 带操作按钮的变体
  &--with-action {
    padding: 120rpx $spacing-lg;
  }

  &__icon {
    margin-bottom: $spacing-lg;
  }

  &__title {
    margin-bottom: $spacing-sm;
    font-size: $font-lg;
    color: $text-main;
    font-weight: $font-semibold;
  }

  &__desc {
    margin-bottom: $spacing-xl;
    font-size: $font-sm;
    text-align: center;
    color: $text-sub;
    line-height: 1.5;
  }

  &__action {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: $spacing-md $spacing-xl;
    color: #fff;
    background: linear-gradient(135deg, $primary 0%, #14b8a6 100%);
    border-radius: $radius-md;
    font-weight: $font-semibold;
    box-shadow: 0 8rpx 24rpx rgb(10 219 195 / 30%);

    &:active {
      transform: scale(0.98);
    }
  }
}

// ========================================
// Tab 切换栏
// ========================================

.filter-tabs {
  position: sticky;
  top: 0;
  z-index: 40;
  display: flex;
  overflow: hidden;
  padding: 0;
  margin: 0 $spacing-lg;
  background: $glass-bg;
  border: 2rpx solid $glass-border;
  border-radius: $radius-md;
  box-shadow: $shadow-md;
  backdrop-filter: blur(32rpx);

  &__item {
    position: relative;
    padding: 20rpx 0;
    text-align: center;
    transition: all 0.3s;
    flex: 1;

    &-content {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6rpx;
      color: $text-sub;
      transition: all 0.3s;
    }

    &-label {
      font-size: 26rpx;
      font-weight: $font-medium;
    }

    &--active &-content {
      color: $primary;
      font-weight: $font-bold;
    }
  }

  // 筋斗云指示器
  &__indicator {
    position: absolute;
    bottom: 0;
    width: 60rpx;
    height: 4rpx;
    background: linear-gradient(90deg, $primary 0%, $primary-dark 100%);
    border-radius: 2rpx;
    box-shadow: 0 2rpx 8rpx rgb(10 219 195 / 40%);
    transition:
      left 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
  }
}

// ========================================
// 状态标签
// ========================================

.status-tag {
  padding: 4rpx 16rpx;
  font-size: $font-sm;
  border-radius: $radius-sm;
  font-weight: $font-semibold;

  &--pending {
    color: #f97316;
    background: rgb(249 115 22 / 10%);
  }

  &--processing {
    color: #3b82f6;
    background: rgb(59 130 246 / 10%);
  }

  &--approved,
  &--success {
    color: #22c55e;
    background: rgb(34 197 94 / 10%);
  }

  &--rejected,
  &--danger {
    color: #ef4444;
    background: rgb(239 68 68 / 10%);
  }

  &--info {
    color: #6b7280;
    background: rgb(107 114 128 / 10%);
  }

  &--primary {
    color: $primary;
    background: rgb(10 219 195 / 10%);
  }
}

// ========================================
// 列表项卡片
// ========================================

.list-item-card {
  padding: 0;
  background: $glass-bg;
  border: 2rpx solid $glass-border-light;
  border-radius: 20rpx;
  box-shadow: 0 4rpx 16rpx rgb(31 38 135 / 5%);
  transition: all 0.3s;
  backdrop-filter: blur(32rpx);

  &:active {
    transform: scale(0.98);
    box-shadow: 0 2rpx 8rpx rgb(31 38 135 / 8%);
  }

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 20rpx $spacing-md 0;
  }

  &__content {
    padding: 12rpx $spacing-md 0;
  }

  &__footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12rpx $spacing-md 20rpx;
    margin-top: 12rpx;
    border-top: 1rpx solid rgb(229 231 235 / 50%);
  }
}

// ========================================
// 安全底部区域
// ========================================

.safe-bottom {
  height: calc(env(safe-area-inset-bottom) + 80rpx);

  &--sm {
    height: 40rpx;
  }

  &--lg {
    height: calc(env(safe-area-inset-bottom) + 160rpx);
  }

  &--xl {
    height: calc(env(safe-area-inset-bottom) + 250rpx);
  }
}

// ========================================
// 区块标题
// ========================================

.section-title {
  display: flex;
  align-items: center;
  padding-left: 4rpx;
  margin-bottom: 20rpx;
  gap: 12rpx;

  &__indicator {
    width: 8rpx;
    height: 32rpx;
    background: linear-gradient(180deg, $primary 0%, $primary-dark 100%);
    border-radius: 4rpx;
  }

  &__text {
    font-size: 30rpx;
    color: $text-main;
    font-weight: $font-semibold;
  }

  // 简单变体（无指示器，仅文字，用于首页等页面）
  &--simple {
    padding-left: 0;
    font-size: $font-xl;
    color: $text-main;
    font-weight: $font-bold;
  }
}

// ========================================
// 底部固定操作栏
// ========================================

.footer-fixed {
  position: fixed;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 100;
  display: flex;
  padding: $spacing-md $spacing-lg;
  padding-bottom: calc(env(safe-area-inset-bottom) + $spacing-md);
  background: rgb(255 255 255 / 95%);
  backdrop-filter: blur(20rpx);
  gap: $spacing-md;
}

// ========================================
// 提交按钮
// ========================================

.submit-btn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 96rpx;
  font-size: $font-lg;
  color: #fff;
  background: linear-gradient(135deg, $primary 0%, #14b8a6 100%);
  border-radius: $radius-xl;
  box-shadow: 0 8rpx 24rpx rgb(10 219 195 / 30%);
  transition: all 0.2s;
  font-weight: $font-bold;

  &:active {
    transform: scale(0.98);
    box-shadow: 0 4rpx 16rpx rgb(10 219 195 / 30%);
  }

  &--disabled {
    opacity: 0.6;
    pointer-events: none;
  }

  &--sm {
    height: 88rpx;
    font-size: $font-md;
    border-radius: $radius-md;
  }
}

// ========================================
// 信息行样式
// ========================================

.info-row {
  display: flex;
  margin-bottom: 12rpx;
  font-size: 26rpx;
  line-height: 1.6;

  &:last-child {
    margin-bottom: 0;
  }

  &__label {
    flex-shrink: 0;
    color: $text-sub;
    font-weight: $font-medium;
  }

  &__value {
    flex: 1;
    color: $text-main;

    &--ellipsis {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }
}

// ========================================
// 动画关键帧
// ========================================

@keyframes blob-float {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(20rpx, -20rpx) scale(1.05); }
  50% { transform: translate(-10rpx, 10rpx) scale(0.95); }
  75% { transform: translate(-20rpx, -10rpx) scale(1.02); }
}

@keyframes loading-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(20rpx);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }

  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

@keyframes pulse-ring {
  0% {
    opacity: 0.8;
    transform: scale(1);
  }

  100% {
    opacity: 0;
    transform: scale(1.5);
  }
}

// ========================================
// 动画工具类
// ========================================

.animate-fade-in {
  opacity: 0;
  animation: fade-in 0.5s ease-out forwards;
}

.animate-pulse {
  animation: pulse 2s ease-in-out infinite;
}
