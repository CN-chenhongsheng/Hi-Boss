# 后台管理（Manager）项目状态说明

本文档梳理后台管理端**模块划分**、**与后端的对接情况**、**与微信小程序的对应关系**，以及**建议的优先开发顺序**。

---

## 一、模块与路由概览

### 1.1 前端路由模块（router/modules）

当前**静态注册**的路由模块仅有以下 5 个，其余业务视图依赖**后端菜单接口**动态注册：

| 模块          | 路径前缀     | 包含子页面                       | 说明           |
| ------------- | ------------ | -------------------------------- | -------------- |
| **Dashboard** | `/dashboard` | 工作台（console）                | 首页数据概览   |
| **System**    | `/system`    | 用户、角色、菜单、字典、个人中心 | 系统配置与权限 |
| **Approval**  | `/approval`  | 流程配置、待审批、审批历史       | 审批流程与待办 |
| **Result**    | `/result`    | 成功/失败结果页                  | 通用结果跳转   |
| **Exception** | `/exception` | 403/404/500                      | 异常页         |

**说明**：用户、角色、菜单、操作日志等接口与后端 `/api/v1/system/*` 对齐；审批与后端 `/api/v1/system/approval/*` 对齐。

### 1.2 已有视图但未在路由模块中声明的业务

以下视图在 `src/views` 下存在，且调用了对应 API，需通过**后端菜单配置**或**在路由模块中补充**才能出现在侧栏并访问：

| 业务域 | 视图路径 | 使用的 API 文件 | 后端路径前缀 |
| --- | --- | --- | --- |
| **住宿管理** | accommodation/（学生、入住、调宿、退宿、留宿） | accommodation-manage.ts | /api/v1/system/student、check-in、transfer、check-out、stay |
| **宿舍管理** | dormitory/（楼层、房间、床位） | dormitory-manage.ts | /api/v1/system/floor、room、bed |
| **组织架构** | organization/（院系、专业、班级） | school-manage.ts | /api/v1/system/department、major、class |
| **学校基础** | school/（校区、学年） | school-manage.ts | /api/v1/system/campus、academic-year |
| **操作日志** | system/oper-log | system-manage.ts | /api/v1/system/oper-log |

上述后端接口在现有 Java 工程中**均已实现**，后台管理端 API 已按该前缀编写，对接状态为**已就绪**（依赖后端菜单返回对应菜单项以展示入口）。

---

## 二、已接后端接口的模块（按 API 文件）

| API 文件 | 主要接口前缀 | 使用该 API 的视图 | 后端实现情况 |
| --- | --- | --- | --- |
| **auth.ts** | /api/v1/auth、/api/v1/user/profile | 登录、个人中心、修改密码 | ✅ 已实现 |
| **system-manage.ts** | /api/v1/system/user、role、menu、dict、oper-log | 用户、角色、菜单、字典、操作日志 | ✅ 已实现 |
| **approval-manage.ts** | /api/v1/system/approval/\* | 流程配置、待审批、审批历史 | ✅ 已实现 |
| **accommodation-manage.ts** | /api/v1/system/student、check-in、transfer、check-out、stay | 学生、入住、调宿、退宿、留宿 | ✅ 已实现 |
| **dormitory-manage.ts** | /api/v1/system/floor、room、bed | 楼层、房间、床位 | ✅ 已实现 |
| **school-manage.ts** | /api/v1/system/campus、department、major、class、academic-year、school | 校区、院系、专业、班级、学年、层级 | ✅ 已实现 |

**结论**：当前后台管理用到的后端接口在 Java 项目中均有对应 Controller，无“后台已写 API 但后端未实现”的缺口。

---

## 三、与微信小程序的模块对应关系

| 小程序端能力 | 后台管理端对应模块 | 说明 |
| --- | --- | --- |
| 学生登录 / 个人信息 / 修改密码 | 系统管理 - 用户、个人中心 | 用户体系与 profile 接口一致 |
| 入住/调宿/退宿/留宿申请与详情 | 住宿管理 - 入住/调宿/退宿/留宿 + 审批 - 待审批/历史 | 同一套后端 check-in/transfer/check-out/stay + approval |
| 申请流程与状态 | 审批 - 流程配置、待审批、审批历史 | 流程配置在后台，学生端仅发起与查看 |
| 宿舍信息、室友 | 宿舍管理 - 楼层/房间/床位；住宿管理 - 学生 | 后端 floor/room/bed/student 与小程序 dorm-info、roommates 对应 |
| 学生习惯（作息等） | 住宿管理 - 学生（含生活信息） | 小程序用 /api/v1/app/student/habits，后台管学生档案 |
| 通知/公告详情与已读 | 后台**暂无**“通知/公告管理”视图 | 小程序已接通知详情与已读接口，后端需有 service/notice；后台可后续加“通知管理”页 |
| 报修列表与提交 | 后台**暂无**“报修管理”视图 | 小程序未接报修接口，后端暂无 repair；后台可后续加“报修管理”页 |

---

## 四、后台管理端当前缺失或可增强的部分

1. **菜单与入口**  
   住宿管理、宿舍管理、组织架构、学校基础、操作日志等已有视图和 API，若未通过后端菜单下发给前端，侧栏不会显示；需在后端菜单/权限中配置对应菜单项，或在前端路由模块中显式注册并挂到菜单。

2. **通知/公告管理**  
   小程序有“通知详情、已读”接口，后端若有 `/api/v1/service/notice/*`，后台可新增“通知管理”页面（列表、发布、编辑、删除），与小程序端对齐。

3. **报修管理**  
   小程序端报修未接接口，后端暂无报修模块。若后端后续增加 `/api/v1/service/repair/*`，后台可新增“报修管理”页面（列表、处理、状态更新），与小程序报修能力对齐。

4. **工作台数据**  
   Dashboard 工作台若需展示统计（如待审批数量、入住率等），需后端提供对应统计接口；当前后端是否有专门“工作台统计”需看实际接口。

---

## 五、建议的优先开发顺序（仅就后台管理端本身）

在**后端与小程序不动**的前提下，仅优化后台管理时建议顺序：

1. **确认菜单与路由**：保证住宿管理、宿舍管理、组织架构、学校、操作日志等菜单由后端下发或前端补全，确保管理员能访问上述已有视图。
2. **工作台**：若需要数据看板，与后端约定统计接口并在 Dashboard 接入。
3. **通知管理**：若后端已有或计划做 notice 接口，再在后台加“通知管理”页。
4. **报修管理**：待后端提供 repair 接口后，再在后台加“报修管理”页。

与**小程序、后端**的联合优先级与任务拆解见根目录 **DEV_TASKS.md**。

---

_文档基于当前代码与接口梳理，菜单/权限以实际后端配置为准。_
